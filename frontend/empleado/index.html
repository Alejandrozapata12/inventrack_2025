<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Inventrack ‚Äî Gesti√≥n de Empleados</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/empleado.css">

<script>
  // Previene el "flash of incorrect theme" (FOUC)
  (function() {
    try {
      var theme = localStorage.getItem('theme');
      if (theme === 'dark') {
        document.documentElement.classList.add('dark-theme');
        document.body.classList.add('dark-theme');
      }
    } catch (e) { console.error('Theme switch failed', e) }
  })();
</script>

</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="brand">
        <div class="brand-logo">IN</div>
        <div>
          <div style="font-weight:800; font-size: 1.1rem;">Inventrack</div>
          <div class="small">Gesti√≥n de Empleados</div>
        </div>
      </div>

      <div class="sidebar-nav">
        <div class="nav-section-title">General</div>
        <a href="#" class="nav-link active" data-section="dashboard"><i class="fa-solid fa-gauge-high nav-icon"></i> Dashboard</a>
        <a href="#" class="nav-link" data-section="productos"><i class="fa-solid fa-boxes-stacked nav-icon"></i> Productos</a>

        <div class="nav-section-title">Movimientos</div>
        <a href="#" class="nav-link" data-section="entradas"><i class="fa-solid fa-arrow-down nav-icon"></i> Entradas</a>
        <a href="#" class="nav-link" data-section="salidas"><i class="fa-solid fa-arrow-up nav-icon"></i> Salidas</a>
        <a href="#" class="nav-link" data-section="movimientos"><i class="fa-solid fa-exchange-alt nav-icon"></i> Historial</a>

        <div class="nav-section-title">Operaciones</div>
        <a href="#" class="nav-link" data-section="solicitudes"><i class="fa-solid fa-paper-plane nav-icon"></i> Solicitudes</a>
        <a href="#" class="nav-link" data-section="ubicaciones"><i class="fa-solid fa-map-marker-alt nav-icon"></i> Ubicaciones</a>
        <a href="#" class="nav-link" data-section="devoluciones"><i class="fa-solid fa-reply nav-icon"></i> Devoluciones</a>
        
        <div class="nav-section-title">Reportes</div>
        <a href="#" class="nav-link" data-section="informes"><i class="fa-solid fa-chart-pie nav-icon"></i> Informes</a>
 

        <div class="nav-section-title">Alertas</div>
        <a href="#" class="nav-link" data-section="alertas"><i class="fa-solid fa-bell nav-icon"></i> Alertas <span id="alertsCount" class="status-badge status-low" style="margin-left:auto;display:none; padding: 2px 8px;">0</span></a>
      </div>
      
      <button id="themeToggle" class="btn theme-toggle">
        <i class="fa-solid fa-moon"></i><span style="margin-left: 8px;">Tema Oscuro</span>
      </button>
    </aside>

    <main class="main">
      <div class="header">
        <div>
          <div class="page-title" id="pageTitle">Dashboard</div>
          <div class="small" id="breadcrumbCurrent">Resumen general del inventario</div>
        </div>
        <div class="header-right">
          <div class="search"><i class="fa-solid fa-magnifying-glass"></i><input id="searchInput" placeholder="Buscar en productos..."></div>
          <div class="profile" id="profileToggle">
  <div class="profile-avatar">EM</div>
  <div class="profile-dropdown" id="profileDropdown">
    <div class="profile-options">
      <button class="dropdown-item" onclick="showHelp()">
        <i class="fa-solid fa-circle-info"></i> Ayuda
      </button>
      <button class="dropdown-item logout-btn" onclick="confirmLogout()">
        <i class="fa-solid fa-sign-out-alt"></i> Cerrar Sesi√≥n
      </button>
    </div>
  </div>
</div>
        </div>
      </div>

      <div class="quick-actions">
        <button class="btn btn-success" onclick="openModal('entryModal')"><i class="fa-solid fa-plus"></i> Nueva entrada</button>
        <button class="btn btn-danger" onclick="openModal('exitModal')"><i class="fa-solid fa-plus"></i> Nueva salida</button>
        <button class="btn btn-primary" onclick="openModal('requestModal')"><i class="fa-solid fa-paper-plane"></i> Nueva Solicitud</button>
        <button class="btn" style="background-color:#60a5fa; color:#fff;" onclick="openModal('returnModal')"><i class="fa-solid fa-reply"></i> Nueva Devoluci√≥n</button>

      </div>

      <section id="dashboardSection">
        <div class="grid-4">
          <div class="card metric-card productos">
            <div class="card-icon">üì¶</div>
            <div id="metricProducts" class="metric-value">0</div>
            <div class="card-title">Productos Totales</div>
            <div class="card-desc">Items √∫nicos registrados</div>
          </div>
          <div class="card metric-card entradas">
            <div class="card-icon">üìà</div>
            <div id="metricEntries" class="metric-value">0</div>
            <div class="card-title">Entradas (Hoy)</div>
            <div class="card-desc">Movimientos de entrada hoy</div>
          </div>
          <div class="card metric-card salidas">
            <div class="card-icon">üìâ</div>
            <div id="metricExits" class="metric-value">0</div>
            <div class="card-title">Salidas (Hoy)</div>
            <div class="card-desc">Movimientos de salida hoy</div>
          </div>
          <div class="card metric-card inventario">
            <div class="card-icon">üí∞</div>
            <div id="metricValue" class="metric-value">$0</div>
            <div class="card-title">Valor del Inventario</div>
            <div class="card-desc">Valor total estimado</div>
          </div>
        </div>

        <div style="margin-top:24px" class="card">
          <div class="section-header" style="margin-bottom:0;">
            <div>
              <h3 style="margin:0;font-size:1.2rem;">Actividad Reciente</h3>
              <div class="small">√öltimos 12 movimientos registrados</div>
            </div>
            <div style="display:flex;gap:8px">
              <button class="btn btn-ghost" onclick="downloadCSV('#activityTable','actividad.csv')"><i class="fa-solid fa-file-csv"></i> Exportar</button>
            </div>
          </div>
          <div class="table-wrap">
            <table id="activityTable">
              <thead><tr><th>Fecha</th><th>Tipo</th><th>Producto</th><th>Cantidad</th><th>Responsable</th><th>Valor</th></tr></thead>
              <tbody id="activityTbody"></tbody>
            </table>
          </div>
        </div>
      </section>

      <section id="productosSection" style="display:none" class="section-card">
        <div class="section-header">
          <div>
            <h2 class="section-title"><i class="fa-solid fa-boxes-stacked" style="color:var(--primary-500)"></i> Productos</h2>
            <p class="small">Lista de todos los productos en el inventario.</p>
          </div>
        </div>
        <!-- Filtros para Productos -->
        <div class="card" style="margin-bottom:24px;">
          <h3 style="margin-top:0;font-size:1.1rem;margin-bottom:16px;">Filtros de Productos</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="productCategoryFilter">Categor√≠a</label>
              <select id="productCategoryFilter" class="form-select" onchange="renderProducts()">
                <option value="">Todas</option>
                <!-- Categories will be populated here by JS -->
              </select>
            </div>
            <div class="form-group">
              <label for="minStockFilter">Stock M√≠nimo</label>
              <input id="minStockFilter" type="number" min="0" class="form-input" oninput="renderProducts()">
            </div>
            <div class="form-group">
              <label for="maxStockFilter">Stock M√°ximo</label>
              <input id="maxStockFilter" type="number" min="0" class="form-input" oninput="renderProducts()">
            </div>
          </div>
          <button class="btn btn-ghost" onclick="clearProductFilters()" style="margin-top:10px;"><i class="fa-solid fa-filter-circle-xmark"></i> Limpiar Filtros</button>
        </div>
        <div class="table-wrap">
          <table>
            <thead><tr><th>Nombre</th><th>SKU</th><th>Categor√≠a</th><th>Stock</th><th>Precio</th><th>Estado</th></tr></thead>
            <tbody id="productsTbody"></tbody>
          </table>
        </div>
      </section>
      
      <section id="entradasSection" style="display:none" class="section-card">
        <div class="section-header">
          <div>
            <h2 class="section-title"><i class="fa-solid fa-arrow-down" style="color:var(--success-500)"></i> Entradas</h2>
            <p class="small">Registra nuevas entradas de productos al inventario.</p>
          </div>
          <button class="btn btn-success" onclick="openModal('entryModal')"><i class="fa-solid fa-plus"></i> Nueva Entrada</button>
        </div>
        <!-- Filtros para Entradas -->
        <div class="card" style="margin-bottom:24px;">
          <h3 style="margin-top:0;font-size:1.1rem;margin-bottom:16px;">Filtros de Entradas</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="entryProductFilter">Producto (Nombre/SKU)</label>
              <input id="entryProductFilter" type="text" class="form-input" oninput="renderEntries()">
            </div>
            <div class="form-group">
              <label for="entryResponsibleFilter">Responsable</label>
              <input id="entryResponsibleFilter" type="text" class="form-input" oninput="renderEntries()">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="entryStartDateFilter">Fecha Inicio</label>
              <input id="entryStartDateFilter" type="date" class="form-input" onchange="renderEntries()">
            </div>
            <div class="form-group">
              <label for="entryEndDateFilter">Fecha Fin</label>
              <input id="entryEndDateFilter" type="date" class="form-input" onchange="renderEntries()">
            </div>
          </div>
          <button class="btn btn-ghost" onclick="clearEntryFilters()" style="margin-top:10px;"><i class="fa-solid fa-filter-circle-xmark"></i> Limpiar Filtros</button>
        </div>
        <div class="table-wrap">
          <table>
            <thead><tr><th>Fecha</th><th>Producto</th><th>Cantidad</th><th>Responsable</th><th>Valor</th></tr></thead>
            <tbody id="entriesTbody"></tbody>
          </table>
        </div>
      </section>
      
      <section id="salidasSection" style="display:none" class="section-card">
        <div class="section-header">
          <div>
            <h2 class="section-title"><i class="fa-solid fa-arrow-up" style="color:var(--danger-500)"></i> Salidas</h2>
            <p class="small">Registra salidas de productos por ventas, devoluciones, etc.</p>
          </div>
          <button class="btn btn-danger" onclick="openModal('exitModal')"><i class="fa-solid fa-plus"></i> Nueva Salida</button>
        </div>
        <!-- Filtros para Salidas -->
        <div class="card" style="margin-bottom:24px;">
          <h3 style="margin-top:0;font-size:1.1rem;margin-bottom:16px;">Filtros de Salidas</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="exitProductFilter">Producto (Nombre/SKU)</label>
              <input id="exitProductFilter" type="text" class="form-input" oninput="renderExits()">
            </div>
            <div class="form-group">
              <label for="exitResponsibleFilter">Responsable</label>
              <input id="exitResponsibleFilter" type="text" class="form-input" oninput="renderExits()">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="exitStartDateFilter">Fecha Inicio</label>
              <input id="exitStartDateFilter" type="date" class="form-input" onchange="renderExits()">
            </div>
            <div class="form-group">
              <label for="exitEndDateFilter">Fecha Fin</label>
              <input id="exitEndDateFilter" type="date" class="form-input" onchange="renderExits()">
            </div>
          </div>
          <button class="btn btn-ghost" onclick="clearExitFilters()" style="margin-top:10px;"><i class="fa-solid fa-filter-circle-xmark"></i> Limpiar Filtros</button>
        </div>
        <div class="table-wrap">
          <table>
            <thead><tr><th>Fecha</th><th>Producto</th><th>Cantidad</th><th>Responsable</th><th>Valor</th></tr></thead>
            <tbody id="exitsTbody"></tbody>
          </table>
        </div>
      </section>
      
      <section id="movimientosSection" style="display:none" class="section-card">
        <div class="section-header">
          <div>
            <h2 class="section-title"><i class="fa-solid fa-clock-rotate-left" style="color:var(--primary-500)"></i> Historial de Movimientos</h2>
            <p class="small">Consulta, filtra y exporta todos los registros del inventario.</p>
          </div>
          <div style="display: flex; gap: 12px;">
            <div class="search">
              <i class="fa-solid fa-magnifying-glass"></i>
              <input id="movFilter" type="text" placeholder="Buscar en historial..." oninput="renderMovements()"/>
            </div>
             <button class="btn btn-ghost" onclick="downloadCSV('#movimientosTable','historial.csv')"><i class="fa-solid fa-file-csv"></i> Exportar</button>
          </div>
        </div>
        <!-- Filtros para Movimientos -->
        <div class="card" style="margin-bottom:24px;">
          <h3 style="margin-top:0;font-size:1.1rem;margin-bottom:16px;">Filtros de Historial</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="movementTypeFilter">Tipo de Movimiento</label>
              <select id="movementTypeFilter" class="form-select" onchange="renderMovements()">
                <option value="">Todos</option>
                <option value="entrada">Entrada</option>
                <option value="salida">Salida</option>
              </select>
            </div>
            <div class="form-group">
              <label for="movementStartDateFilter">Fecha Inicio</label>
              <input id="movementStartDateFilter" type="date" class="form-input" onchange="renderMovements()">
            </div>
            <div class="form-group">
              <label for="movementEndDateFilter">Fecha Fin</label>
              <input id="movementEndDateFilter" type="date" class="form-input" onchange="renderMovements()">
            </div>
          </div>
          <button class="btn btn-ghost" onclick="clearMovementFilters()" style="margin-top:10px;"><i class="fa-solid fa-filter-circle-xmark"></i> Limpiar Filtros</button>
        </div>
        <div class="table-wrap">
          <table>
            <thead><tr><th>Fecha</th><th>Tipo</th><th>SKU</th><th>Producto</th><th>Cantidad</th><th>Responsable</th><th>Valor</th></tr></thead>
            <tbody id="movimientosTbody"></tbody>
          </table>
        </div>
      </section>

      <section id="solicitudesSection" style="display:none" class="section-card">
        <div class="section-header">
          <div>
            <h2 class="section-title"><i class="fa-solid fa-paper-plane" style="color:var(--primary-500)"></i> Solicitudes de Stock</h2>
            <p class="small">Gestiona y consulta las solicitudes de productos.</p>
          </div>
          <button class="btn btn-primary" onclick="openModal('requestModal')"><i class="fa-solid fa-plus"></i> Nueva Solicitud</button>
        </div>
        <!-- Filtros para Solicitudes -->
        <div class="card" style="margin-bottom:24px;">
          <h3 style="margin-top:0;font-size:1.1rem;margin-bottom:16px;">Filtros de Solicitudes</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="requestProductFilter">Producto (Nombre/SKU)</label>
              <input id="requestProductFilter" type="text" class="form-input" oninput="renderRequests()">
            </div>
            <div class="form-group">
              <label for="requestResponsibleFilter">Responsable</label>
              <input id="requestResponsibleFilter" type="text" class="form-input" oninput="renderRequests()">
            </div>
            <div class="form-group">
              <label for="requestStatusFilter">Estado</label>
              <select id="requestStatusFilter" class="form-select" onchange="renderRequests()">
                <option value="">Todos</option>
                <option value="Pendiente">Pendiente</option>
                <option value="Aprobada">Aprobada</option>
                <option value="Rechazada">Rechazada</option>
              </select>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="requestStartDateFilter">Fecha Inicio</label>
              <input id="requestStartDateFilter" type="date" class="form-input" onchange="renderRequests()">
            </div>
            <div class="form-group">
              <label for="requestEndDateFilter">Fecha Fin</label>
              <input id="requestEndDateFilter" type="date" class="form-input" onchange="renderRequests()">
            </div>
          </div>
          <button class="btn btn-ghost" onclick="clearRequestFilters()" style="margin-top:10px;"><i class="fa-solid fa-filter-circle-xmark"></i> Limpiar Filtros</button>
        </div>
        <div class="table-wrap">
          <table>
            <thead><tr><th>Fecha</th><th>Producto</th><th>Cantidad</th><th>Responsable</th><th>Justificaci√≥n</th><th>Estado</th></tr></thead>
            <tbody id="requestsTbody"></tbody>
          </table>
        </div>
      </section>

      <section id="ubicacionesSection" style="display:none" class="section-card">
        <div class="section-header">
          <div>
            <h2 class="section-title"><i class="fa-solid fa-map-marker-alt" style="color:#a855f7"></i> Ubicaciones de Productos</h2>
            <p class="small">Consulta y actualiza las ubicaciones f√≠sicas de los productos.</p>
          </div>
        </div>
        <!-- Filtros para Ubicaciones -->
        <div class="card" style="margin-bottom:24px;">
          <h3 style="margin-top:0;font-size:1.1rem;margin-bottom:16px;">Filtros de Ubicaciones</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="locationProductFilter">Producto (Nombre/SKU)</label>
              <input id="locationProductFilter" type="text" class="form-input" oninput="renderLocations()">
            </div>
            <div class="form-group">
              <label for="locationTextFilter">Ubicaci√≥n</label>
              <input id="locationTextFilter" type="text" class="form-input" oninput="renderLocations()">
            </div>
          </div>
          <button class="btn btn-ghost" onclick="clearLocationFilters()" style="margin-top:10px;"><i class="fa-solid fa-filter-circle-xmark"></i> Limpiar Filtros</button>
        </div>
        <div class="table-wrap">
          <table>
            <thead><tr><th>Nombre</th><th>SKU</th><th>Stock</th><th>Ubicaci√≥n</th><th>Acciones</th></tr></thead>
            <tbody id="locationsTbody"></tbody>
          </table>
        </div>
      </section>

      <section id="devolucionesSection" style="display:none" class="section-card">
        <div class="section-header">
          <div>
            <h2 class="section-title"><i class="fa-solid fa-reply" style="color:#60a5fa"></i> Gesti√≥n de Devoluciones</h2>
            <p class="small">Registra y consulta los productos devueltos al inventario.</p>
          </div>
          <button class="btn" style="background-color:#60a5fa; color:#fff;" onclick="openModal('returnModal')"><i class="fa-solid fa-plus"></i> Nueva Devoluci√≥n</button>
        </div>
        <!-- Filtros para Devoluciones -->
        <div class="card" style="margin-bottom:24px;">
          <h3 style="margin-top:0;font-size:1.1rem;margin-bottom:16px;">Filtros de Devoluciones</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="returnProductFilter">Producto (Nombre/SKU)</label>
              <input id="returnProductFilter" type="text" class="form-input" oninput="renderReturns()">
            </div>
            <div class="form-group">
              <label for="returnReasonFilter">Raz√≥n de Devoluci√≥n</label>
              <input id="returnReasonFilter" type="text" class="form-input" oninput="renderReturns()">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="returnStartDateFilter">Fecha Inicio</label>
              <input id="returnStartDateFilter" type="date" class="form-input" onchange="renderReturns()">
            </div>
            <div class="form-group">
              <label for="returnEndDateFilter">Fecha Fin</label>
              <input id="returnEndDateFilter" type="date" class="form-input" onchange="renderReturns()">
            </div>
          </div>
          <button class="btn btn-ghost" onclick="clearReturnFilters()" style="margin-top:10px;"><i class="fa-solid fa-filter-circle-xmark"></i> Limpiar Filtros</button>
        </div>
        <div class="table-wrap">
          <table>
            <thead><tr><th>Fecha</th><th>Producto</th><th>Cantidad</th><th>Raz√≥n</th><th>Responsable</th><th>Valor</th></tr></thead>
            <tbody id="returnsTbody"></tbody>
          </table>
        </div>
      </section>

      <section id="informesSection" style="display:none" class="section-card">
        <div class="section-header">
          <div>
            <h2 class="section-title"><i class="fa-solid fa-chart-pie" style="color:#f59e0b"></i> Informes B√°sicos</h2>
            <p class="small">Genera reportes r√°pidos del estado del inventario.</p>
          </div>
        </div>
        
        <div style="margin-bottom:24px" class="card">
          <h3 style="margin-top:0;font-size:1.1rem;margin-bottom:16px;">Stock por Categor√≠a</h3>
          <div class="table-wrap" style="margin-top:0;">
            <table>
              <thead><tr><th>Categor√≠a</th><th>Productos √önicos</th><th>Stock Total</th><th>Valor Estimado</th></tr></thead>
              <tbody id="stockByCategoryTbody"></tbody>
            </table>
          </div>
        </div>

        <div class="card">
          <h3 style="margin-top:0;font-size:1.1rem;margin-bottom:16px;">Movimientos del D√≠a</h3>
          <div class="table-wrap" style="margin-top:0;">
            <table>
              <thead><tr><th>Fecha</th><th>Tipo</th><th>Producto</th><th>Cantidad</th><th>Responsable</th><th>Valor</th></tr></thead>
              <tbody id="dailyMovementsTbody"></tbody>
            </table>
          </div>
        </div>
      </section>


      <section id="alertasSection" style="display:none" class="section-card">
          <div class="section-header">
              <div class="alerts-header">
                  <h2 class="section-title"><i class="fa-solid fa-bell" style="color:var(--warning-500)"></i> Alertas de Stock</h2>
                  <p class="small">Productos que han alcanzado o est√°n por debajo de su umbral de stock bajo.</p>
              </div>
              <button class="btn btn-ghost" onclick="renderAlerts()"><i class="fa-solid fa-sync"></i> Actualizar</button>
          </div>
          <div id="alertsContainer" class="alerts-container">
              </div>
      </section>
      
    </main>
  </div>

  <div class="modal-overlay" id="entryModal">
    <div class="modal">
      <div class="modal-header"><strong>Registrar Entrada</strong><button class="btn btn-ghost" onclick="closeModal('entryModal')"><i class="fa-solid fa-xmark"></i></button></div>
      <form onsubmit="event.preventDefault(); submitEntryModal();">
        <div class="modal-body">
          <div class="form-group"><label>Producto</label><select id="m_eProduct" class="form-select" required></select></div>
          <div class="form-group"><label>Cantidad</label><input id="m_eQty" type="number" min="1" class="form-input" required></div>
          <div class="form-group"><label>Responsable</label><input id="m_eResp" class="form-input" value="Empleado" required></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-ghost" onclick="closeModal('entryModal')">Cancelar</button>
          <button type="submit" class="btn btn-success">Registrar Entrada</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal-overlay" id="exitModal">
    <div class="modal">
      <div class="modal-header"><strong>Registrar Salida</strong><button class="btn btn-ghost" onclick="closeModal('exitModal')"><i class="fa-solid fa-xmark"></i></button></div>
      <form onsubmit="event.preventDefault(); submitExitModal();">
        <div class="modal-body">
          <div class="form-group"><label>Producto</label><select id="m_xProduct" class="form-select" required></select></div>
          <div class="form-group"><label>Cantidad</label><input id="m_xQty" type="number" min="1" class="form-input" required></div>
          <div class="form-group"><label>Responsable</label><input id="m_xResp" class="form-input" value="Empleado" required></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-ghost" onclick="closeModal('exitModal')">Cancelar</button>
          <button type="submit" class="btn btn-danger">Registrar Salida</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal-overlay" id="requestModal">
    <div class="modal">
      <div class="modal-header"><strong>Nueva Solicitud de Stock</strong><button class="btn btn-ghost" onclick="closeModal('requestModal')"><i class="fa-solid fa-xmark"></i></button></div>
      <form onsubmit="event.preventDefault(); saveRequestModal();">
        <div class="modal-body">
          <div class="form-group"><label>Producto (Stock Actual: <span id="m_reqProductStock">0</span>)</label><select id="m_reqProduct" class="form-select" required></select></div>
          <div class="form-group"><label>Cantidad Necesaria</label><input id="m_reqQty" type="number" min="1" class="form-input" required></div>
          <div class="form-group"><label>Justificaci√≥n (Opcional)</label><textarea id="m_reqJustification" class="form-input"></textarea></div>
          <input type="hidden" id="m_reqIndex">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-ghost" onclick="closeModal('requestModal')">Cancelar</button>
          <button type="submit" class="btn btn-primary">Enviar Solicitud</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal-overlay" id="locationModal">
    <div class="modal">
      <div class="modal-header"><strong>Actualizar Ubicaci√≥n de Producto</strong><button class="btn btn-ghost" onclick="closeModal('locationModal')"><i class="fa-solid fa-xmark"></i></button></div>
      <form onsubmit="event.preventDefault(); saveLocationModal();">
        <div class="modal-body">
          <div class="form-group"><label>Producto</label><input id="m_locProductName" class="form-input" readonly></div>
          <div class="form-group"><label>SKU</label><input id="m_locProductSKU" class="form-input" readonly></div>
          <div class="form-group"><label>Nueva Ubicaci√≥n</label><input id="m_locLocation" class="form-input" required placeholder="Ej: Pasillo A, Estanter√≠a 3"></div>
          <input type="hidden" id="m_locProductId">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-ghost" onclick="closeModal('locationModal')">Cancelar</button>
          <button type="submit" class="btn btn-primary">Guardar Ubicaci√≥n</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal-overlay" id="returnModal">
    <div class="modal">
      <div class="modal-header"><strong>Registrar Devoluci√≥n</strong><button class="btn btn-ghost" onclick="closeModal('returnModal')"><i class="fa-solid fa-xmark"></i></button></div>
      <form onsubmit="event.preventDefault(); saveReturnModal();">
        <div class="modal-body">
          <div class="form-group"><label>Producto</label><select id="m_retProduct" class="form-select" required></select></div>
          <div class="form-group"><label>Cantidad</label><input id="m_retQty" type="number" min="1" class="form-input" required></div>
          <div class="form-group"><label>Raz√≥n de Devoluci√≥n</label><textarea id="m_retReason" class="form-input" required></textarea></div>
          <input type="hidden" id="m_retResponsible" value="Empleado">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-ghost" onclick="closeModal('returnModal')">Cancelar</button>
          <button type="submit" class="btn" style="background-color:#60a5fa; color:#fff;">Registrar Devoluci√≥n</button>
        </div>
      </form>
    </div>
  </div>

  <div class="toasts" id="toasts"></div>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="js/app.js"></script>
</body>
</html>
